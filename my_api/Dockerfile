# Використовуємо офіційний, повний образ Dart.
# Це менш оптимізовано, але на 100% надійно для діагностики.
FROM dart:stable

# Встановлюємо робочу директорію
WORKDIR /app

# Встановлюємо інструменти Dart Frog
RUN dart pub global activate dart_frog_cli

# Копіюємо всі файли нашого проекту
COPY . .

# Завантажуємо залежності
RUN dart pub get

# Генеруємо код для роутингу
RUN dart_frog build

# Відкриваємо порт
EXPOSE 8080

# Запускаємо сервер в режимі розробки, щоб бачити всі логи.
# Це фінальний діагностичний крок.
CMD ["dart_frog", "dev", "--port", "8080", "--host", "0.0.0.0"]